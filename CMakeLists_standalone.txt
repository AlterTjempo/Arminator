# Standalone CMakeLists.txt for testing without ROS 2
cmake_minimum_required(VERSION 3.10)
project(arminator_standalone)

set(CMAKE_CXX_STANDARD 14)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

if(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_CXX_COMPILER_ID MATCHES "Clang")
  add_compile_options(-Wall -Wextra -Wpedantic)
endif()

# include directories
include_directories(include)

# Core library for AL5D robot arm
add_library(al5d_controller SHARED
  src/al5d_controller.cpp
  src/serial_interface.cpp
  src/kinematics.cpp
)

target_include_directories(al5d_controller PUBLIC
  $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include>
  $<INSTALL_INTERFACE:include>
)

# Simple test executable (without ROS dependencies)
add_executable(test_standalone test/test_standalone.cpp)
target_link_libraries(test_standalone al5d_controller)

# Install targets
install(TARGETS al5d_controller
  LIBRARY DESTINATION lib
  ARCHIVE DESTINATION lib
  RUNTIME DESTINATION bin
)

install(DIRECTORY include/
  DESTINATION include
)

install(TARGETS test_standalone
  DESTINATION bin
)